{% load static %}

<div class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-title">
                    <h3 class="title">New Product</h3>
                    <div class="section-nav">
                        <ul class="section-tab-nav tab-nav">
                            <li class="active">
                                <a data-toggle="tab" href="#tab-all">All</a>
                            </li>

                            {% for category in ObjDTCategory %}
                            <li>
                                <a data-toggle="tab" href="#tab-{{ category.id }}">
                                    {{ category.categoryName }}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="row">
                    <div class="products-tabs">
                        <div id="tab-all" class="tab-pane active">
                            <div class="products-slick" data-nav="#slick-nav-all">
                                {% for product in ObjDTproduct %}
                                <div
                                    class="product {{ product.categoryID.categoryName|slugify }}"
                                >
                                    <div class="product-img">
                                        <img
                                            src="{% static product.productImage %}"
                                            alt="{{ product.id }}"
                                        />
                                        <div class="product-label">
                                            <span class="new">NEW</span>
                                        </div>
                                    </div>
                                    <div class="product-body">
                                        <p class="product-category">
                                            {{ product.categoryID.categoryName }}
                                        </p>
                                        <h3 class="product-name">
                                            <a href="{% url 'productDetail' product.id %}">
                                                {{ product.productName }}
                                            </a>
                                        </h3>
                                        <h4 class="product-price">${{ product.price }}</h4>
                                        <div class="product-rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                        <div class="product-btns">
                                            <button class="add-to-wishlist">
                                                <i class="fa fa-heart-o"></i
                                                ><span class="tooltipp">add to wishlist</span>
                                            </button>
                                            <button class="add-to-compare">
                                                <i class="fa fa-exchange"></i
                                                ><span class="tooltipp">add to compare</span>
                                            </button>
                                            <button class="quick-view">
                                                <i class="fa fa-eye"></i
                                                ><span class="tooltipp">quick view</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="add-to-cart">
                                        <form
                                            action="{% url 'add_to_cart' product.id %}"
                                            method="post"
                                        >
                                            {% csrf_token %}
                                            <button type="submit" class="add-to-cart-btn">
                                                <i class="fa fa-shopping-cart"></i> add to cart
                                            </button>
                                        </form>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            <div id="slick-nav-all" class="products-slick-nav"></div>
                        </div>

                        {% for category in ObjDTCategory %}
                        <div id="tab-{{ category.id }}" class="tab-pane">
                            <div
                                class="products-slick"
                                data-nav="#slick-nav-{{ category.id }}"
                            >
                                {% for product in ObjDTproduct %} 
                                    {% if product.categoryID.id == category.id %}

                                    <div
                                        class="product {{ product.categoryID.categoryName|slugify }}"
                                    >
                                        <div class="product-img">
                                            <img
                                                src="{% static product.productImage %}"
                                                alt="{{ product.id }}"
                                            />
                                            <div class="product-label">
                                                <span class="new">NEW</span>
                                            </div>
                                        </div>
                                        <div class="product-body">
                                            <p class="product-category">
                                                {{ product.categoryID.categoryName }}
                                            </p>
                                            <h3 class="product-name">
                                                <a href="{% url 'productDetail' product.id %}">
                                                    {{ product.productName }}
                                                </a>
                                            </h3>
                                            <h4 class="product-price">${{ product.price }}</h4>
                                            <div class="product-rating">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            </div>
                                            <div class="product-btns">
                                                <button class="add-to-wishlist">
                                                    <i class="fa fa-heart-o"></i
                                                    ><span class="tooltipp">add to wishlist</span>
                                                </button>
                                                <button class="add-to-compare">
                                                    <i class="fa fa-exchange"></i
                                                    ><span class="tooltipp">add to compare</span>
                                                </button>
                                                <button class="quick-view">
                                                    <i class="fa fa-eye"></i
                                                    ><span class="tooltipp">quick view</span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="add-to-cart">
                                            <form
                                                action="{% url 'add_to_cart' product.id %}"
                                                method="post"
                                            >
                                                {% csrf_token %}
                                                <button type="submit" class="add-to-cart-btn">
                                                    <i class="fa fa-shopping-cart"></i> add to cart
                                                </button>
                                            </form>
                                        </div>
                                    </div>

                                    {% endif %}
                                {% endfor %}
                                </div>
                            <div
                                id="slick-nav-{{ category.id }}"
                                class="products-slick-nav"
                            ></div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>