{% load static %}

<div class="section">
  <div class="container">
    <div class="row">
      <!-- Product Main Image -->
      <div class="col-md-5 col-md-push-2">
        <div id="product-main-img">
          {% for image in ObjDTProductDetailImage %}
          <div class="product-preview">
            <img
              src="{% static image.productDetailImage %}"
              alt="{{ ObjDTProductDetail.productName }}"
            />
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Product Thumbnails -->
      <div class="col-md-2 col-md-pull-5">
        <div id="product-imgs">
          {% for image in ObjDTProductDetailImage %}
          <div class="product-preview">
            <img
              src="{% static image.productDetailImage %}"
              alt="{{ ObjDTProductDetail.productName }}"
            />
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Product Details -->
      <div class="col-md-5">
        <div class="product-details">
          <h2 class="product-name">{{ ObjDTProductDetail.productName }}</h2>

          <div class="product-rating-section">
            <div class="product-rating">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <a class="review-link" href="#">10 Review(s) | Add your review</a>
          </div>

          <div class="product-price-section">
            <h3 class="product-price">
              ${{ ObjDTProductDetail.price|floatformat:2 }}
            </h3>
            <span class="product-available">In Stock</span>
          </div>

          <p class="product-short-desc">
            {{ ObjDTProductDetailInfo.Description|striptags|truncatewords:25 }}
          </p>

          <div class="product-options">
            <label>
              Size
              <select class="input-select">
                <option value="0">X</option>
              </select>
            </label>
            <label>
              Color
              <select class="input-select">
                <option value="0">Red</option>
              </select>
            </label>
          </div>

          <!-- Add to Cart Form -->
          <form
            action="{% url 'add_to_cart' ObjDTProductDetail.id %}"
            method="post"
            class="add-to-cart"
          >
            {% csrf_token %}
            <div class="qty-label">
              Qty
              <div class="input-number">
                <input type="number" name="quantity" value="1" min="1" />
                <span class="qty-up">+</span>
                <span class="qty-down">-</span>
              </div>
            </div>
            <button type="submit" class="add-to-cart-btn">
              <i class="fa fa-shopping-cart"></i> Add to Cart
            </button>
          </form>

          <ul class="product-btns">
            <li>
              <a href="#"><i class="fa fa-heart-o"></i> Add to Wishlist</a>
            </li>
            <li>
              <a href="#"><i class="fa fa-exchange"></i> Add to Compare</a>
            </li>
          </ul>

          <ul class="product-links">
            <li>Category:</li>
            {% for cat in ObjDTProductDetail.categories.all %}
            <li><a href="#">{{ cat.categoryName }}</a></li>
            {% endfor %}
          </ul>

          <ul class="product-links">
            <li>Share:</li>
            <li>
              <a href="#"><i class="fa fa-facebook"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa fa-twitter"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa fa-google-plus"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa fa-envelope"></i></a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Product Tabs -->
      <div class="col-md-12">
        <div id="product-tab">
          <ul class="tab-nav">
            <li class="active">
              <a data-toggle="tab" href="#tab1">Description</a>
            </li>
            <li><a data-toggle="tab" href="#tab2">Details</a></li>
            <li><a data-toggle="tab" href="#tab3">Reviews (3)</a></li>
          </ul>

          <div class="tab-content">
            <div id="tab1" class="tab-pane fade in active">
              <div class="row">
                <div class="col-md-12">
                  <p>{{ ObjDTProductDetailInfo.Description|safe }}</p>
                </div>
              </div>
            </div>

            <div id="tab2" class="tab-pane fade in">
              <div class="row">
                <div class="col-md-12">
                  <p>{{ ObjDTProductDetailInfo.Information|safe }}</p>
                </div>
              </div>
            </div>

            <div id="tab3" class="tab-pane fade in">
              <div class="row">
                <!-- Ratings & Reviews here (same as your previous code) -->
                             <div id="tab3" class="tab-pane fade in">
              <div class="row">
                <!-- Ratings & Reviews here (same as your previous code) -->
                <div class="col-md-12">
                  <div class="review">
                    <div class="review-heading">
                      <h5 class="review-title">Great product quality!</h5>
                      <p class="review-meta">
                        By <strong>John Doe</strong> on <em>January 15, 2024</em>
                      </p>
                      <div class="review-rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                      </div>
                    </div>
                    <p class="review-body">
                      This product exceeded my expectations. The build quality is excellent and it arrived quickly. Highly recommend!
                    </p>
                  </div>

                  <div class="review">
                    <div class="review-heading">
                      <h5 class="review-title">Good value for money</h5>
                      <p class="review-meta">
                        By <strong>Dy</strong> on <em>January 10, 2024</em>
                      </p>
                      <div class="review-rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                      </div>
                    </div>
                    <p class="review-body">
                      Perfect! Works as described. Exactly what I was looking for at a reasonable price.
                    </p>
                  </div>

                  <div class="review">
                    <div class="review-heading">
                      <h5 class="review-title">Decent quality</h5>
                      <p class="review-meta">
                        By <strong>Nak</strong> on <em>January 5, 2024</em>
                      </p>
                      <div class="review-rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                        <i class="fa fa-star-o"></i>
                      </div>
                    </div>
                    <p class="review-body">
                      It's okay. Does what it's supposed to do, but nothing special. Would be better with faster shipping.
                    </p>
                  </div>
                </div>
              </div>
            </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Products -->
      <div class="col-md-12">
  <div class="section-title text-center">
    <h3 class="title">Related Products</h3>
  </div>

  <div class="row">
    {% for product in related_products %}
    <div class="col-md-3 col-xs-6">
      <div class="product">
        <div class="product-img">
          <img src="{% static product.productImage %}" alt="{{ product.productName }}">
        </div>

        <div class="product-body">
          <p class="product-category">{{ product.categoryID.categoryName }}</p>

          <h3 class="product-name">
            <a href="{% url 'productDetail' product.id %}">
              {{ product.productName }}
            </a>
          </h3>

          <h4 class="product-price">
            ${{ product.price|floatformat:2 }}
          </h4>
        </div>
      </div>
    </div>
    {% empty %}
    <p class="text-center">No related products found.</p>
    {% endfor %}
  </div>
</div>

      </div>
    </div>
  </div>
</div>
